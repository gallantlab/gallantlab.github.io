# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## About This Project

This is the Gallant Lab website built with Hugo using the Ananke theme. The site is customized for an academic neuroscience lab at UC Berkeley, featuring team member profiles, publications, and lab information.

## Development Commands

### Local Development Server

```bash
# Start Hugo server for development
hugo server --port 4000

# Start with drafts
hugo server --port 4000 --buildDrafts

# Stop Hugo server
# Press Ctrl+C or use: pkill -f "hugo server"
```

### Build and Deployment

```bash
# Build the site (generates public/ directory)
hugo --minify

# Clean build cache
hugo --gc
```

**Deployment**: Automatic via GitHub Actions on push to `main` branch. The workflow builds the site and deploys to `gh-pages` branch, which GitHub Pages serves at gallantlab.org.

## Hugo Site Structure

- **content/**: Main site pages (\_index.md, people.md, publications.md, etc.)
- **content/news/**: News items as individual markdown files
- **layouts/**: Page templates and shortcodes
- **layouts/shortcodes/**: Reusable components (people-list.html, content-card.html)
- **data/**: YAML data files (people.yml with team member info)
- **static/**: Static assets served directly
  - **static/img/**: Images (people/, papers/, datasets/, other/)
  - **static/assets/**: Other static assets
- **assets/css/**: CSS files (custom.css for site styling)
- **themes/ananke/**: Hugo Ananke theme
- **hugo.toml**: Hugo configuration file
- **public/**: Generated static site (auto-generated by Hugo, not in git)

## Important Directories

### Image Management

**Images belong in `static/`**, NOT `assets/`:
- People photos: `static/img/people/`
- Publication images: `static/img/papers/`
- Dataset images: `static/img/datasets/`

In templates, reference as `/img/people/name.webp` (Hugo serves from `static/` at root)

### People Data

Team members are managed in `data/people.yml` with sections:
- `principal_investigator`
- `current_members`
- `current_visitors`
- `alumni`

Add new people to the appropriate section with:
```yaml
- name: "Full Name"
  title: "Position Title"
  image: "people/Name.webp"
  description: "Bio text with optional <a href='...'>links</a>"
```

## Key Files

### Styling

- `assets/css/custom.css`: Main custom styles
  - Modern glassmorphism card effects
  - Responsive design with mobile breakpoints
  - CSS custom properties for theming
  - Consistent font sizes (body text: 1.125rem)

### Templates

- `layouts/index.html`: Homepage template with news section
- `layouts/shortcodes/people-list.html`: People grid renderer
- `layouts/shortcodes/content-card.html`: Publication/content cards

### Content Pages

- `content/_index.md`: Landing page
- `content/people.md`: Team members page
- `content/publications.md`: Publications with YAML data
- `content/news/*.md`: Individual news items

## Image Workflow

Always convert images to WebP format:

```bash
# Convert to WebP (85% quality)
cwebp -q 85 source.jpg -o destination.webp

# Move to appropriate static directory
mv destination.webp static/img/people/

# Remove original
rm source.jpg
```

## Git Workflow

1. Make changes and test locally with `hugo server --port 4000`
2. Commit with descriptive messages
3. Push to `main` branch
4. GitHub Actions automatically builds and deploys

**Session Log**: Document significant changes in `claude-session-memory.md`

## Development Notes

### Hugo vs Jekyll

This site was migrated from Jekyll to Hugo. Key differences:
- Hugo uses `static/` for images (not `assets/img/`)
- Hugo uses `data/` for YAML data (not `_data/`)
- Hugo uses `layouts/` for templates (not `_layouts/` and `_includes/`)
- No Ruby dependencies or Gemfile
- Faster builds and simpler deployment

### Common Tasks

**Add a team member:**
1. Convert photo to WebP: `cwebp -q 85 photo.jpg -o Name.webp`
2. Move to `static/img/people/`
3. Add entry to `data/people.yml` in appropriate section
4. Commit and push

**Add a news item:**
1. Create `content/news/YYYY-MM-DD-title.md`
2. Add front matter with date, image, description
3. Hugo automatically shows latest 7 on homepage

**Update styling:**
1. Edit `assets/css/custom.css`
2. Hugo live reload shows changes immediately
3. Test responsive design at mobile breakpoints

### Performance

- All images should be in WebP format
- Hugo minifies HTML/CSS/JS in production builds
- Static files cached with proper headers
- Responsive images handled via Hugo image processing
