{{ define "main" }}
<article class="cf ph3 ph5-l pv3 pv4-l f4 center lh-copy nested-links nested-copy-line-height blog-list-container">
  {{ .Content }}

  {{- $paginator := .Paginate (where .Site.RegularPages "Section" "blog") -}}
  {{- range $paginator.Pages -}}
  <div class="post-preview card fade-in blog-post-preview">
    {{- if .Params.featured_image -}}
    <div class="blog-featured-image-container">
      <a href="{{ .Permalink }}">
        <img src="{{ .Params.featured_image }}" alt="{{ .Title }}" class="blog-featured-image" />
      </a>
    </div>
    {{- end -}}
    <h2 class="blog-post-title">
      <a href="{{ .Permalink }}">{{ .Title }}</a>
    </h2>
    <p class="blog-meta">{{ .Date.Format "January 2, 2006" }}</p>
    <div class="blog-summary">
      {{ .Summary }}
    </div>
    <p class="blog-read-more">
      <a href="{{ .Permalink }}" class="blog-read-more-link">Read more →</a>
    </p>
  </div>
  {{- end -}}

  {{- if gt $paginator.TotalPages 1 -}}
  <nav class="blog-paginator">
    {{- if $paginator.HasPrev -}}
    <a href="{{ $paginator.Prev.URL }}" class="blog-paginator-link">← Newer Posts</a>
    {{- end -}}
    {{- if $paginator.HasNext -}}
    <a href="{{ $paginator.Next.URL }}" class="blog-paginator-link">Older Posts →</a>
    {{- end -}}
  </nav>
  {{- end -}}
</article>
{{ end }}
